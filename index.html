<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Бронирование места</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Добавляем стили для валидации */
        input[name="link"]:valid {
            border-color: #5cb85c;
        }
        input[name="link"]:invalid {
            border-color: #d9534f;
        }
        .hint {
            display: block;
            color: #666;
            font-size: 12px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>БРОНИРУЙ ИДЕАЛЬНОЕ МЕСТО ДЛЯ СЕБЯ!</h1>

        <div class="content-wrapper">
            <div class="map-section">
                <div class="map-container" id="map">
                        <!-- Фоновая картинка -->
                        <img src="./src/posadka.png" class="map-background" alt="Схема расположения мест в зале" loading="lazy">
                    <svg width="100%" height="100%" viewBox="0 0 1364.7 784.4">
                        <!-- Фон карты -->
                    </svg>
                </div>
            </div>

            <div class="right-aligned">
                <div class="status-block">
                    <div class="status-item">
                        <div class="color-box gray-blue"></div>
                        <div class="status-text">
                            <p>свободные места</p>
                            <p>*боксы</p>
                        </div>
                    </div>
                    <div class="status-item">
                        <div class="color-box green"></div>
                        <div class="status-text">
                            <p>свободные места</p>
                            <p>*Open Space</p>
                        </div>
                    </div>
                    <div class="status-item">
                        <div class="color-box pink"></div>
                        <div class="status-text">
                            <p>место свободно</p>
                            <p>*только 24.05</p>
                        </div>
                    </div>
                    <div class="status-item">
                        <div class="color-box peach"></div>
                        <div class="status-text">
                            <p>место свободно</p>
                            <p>*только 25.05</p>
                        </div>
                    </div>
                    <div class="status-item">
                        <div class="color-box gray"></div>
                        <div class="status-text">
                            <p>место забронировано</p>
                            <p>*полностью</p>
                        </div>
                    </div>
                </div>

                <div class="booking-form">
                    <h2>ДАННЫЕ ДЛЯ БРОНИРОВАНИЯ МЕСТА</h2>
                    <div class="selected-places-info">
                        <p>Выбранные места: <span id="selectedPlacesCount">0</span></p>
                        <div id="selectedPlacesList"></div>
                    </div>
                    <form id="bookingForm">
                        <input type="text" name="name" placeholder="ИМЯ как в заявке" required>
                        <input type="text" 
                               name="link" 
                               placeholder="ССЫЛКА НА СТРАНИЦУ VK" 
                               pattern="^(https?:\/\/)?(www\.)?vk\.com\/[a-zA-Z0-9_\.-]+" 
                               title="Пример: vk.com/username или https://vk.com/id12345"
                               required>
                        <small class="hint">Формат: vk.com/username или https://vk.com/id12345</small>
                        
                        <div class="options">
                            <label><input type="radio" name="date" value="24.05" checked> ТОЛЬКО 24.05</label>
                            <label><input type="radio" name="date" value="25.05"> ТОЛЬКО 25.05</label>
                            <label><input type="radio" name="date" value="both"> ОБА ДНЯ</label>
                        </div>
                        
                        <button type="submit">ЗАБРОНИРОВАТЬ</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Места
        const places = [
            
                  // Зеленые места (cls-1)
                  
{ x: 1051.6, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1081.6, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1110.9, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1111.5, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1081.6, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1050.4, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1142, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1173.2, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1142, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1173.2, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1200.6, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1256.8, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1227.5, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1200.6, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1227.5, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1256.8, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1284.3, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1311.8, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1341.1, y: 6.3, rotate: 179.8, class: 'open_space' },
{ x: 1284.3, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1311.8, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1341.1, y: 35.6, rotate: 179.8, class: 'open_space' },
{ x: 1101.1, y: 64.9, rotate: 179.8, class: 'open_space' },
{ x: 1161.6, y: 64.9, rotate: 179.8, class: 'open_space' },
{ x: 1184.8, y: 64.9, rotate: 179.8, class: 'open_space' },
{ x: 1209.2, y: 64.9, rotate: 179.8, class: 'open_space' },
{ x: 1076.7, y: 64.9, rotate: 179.8, class: 'open_space' },
{ x: 1051.6, y: 64.9, rotate: 179.8, class: 'open_space' },
{ x: 955.2, y: 133.3, rotate: 179.8, class: 'open_space' },
{ x: 982.7, y: 133.3, rotate: 179.8, class: 'open_space' },
{ x: 954, y: 155.2, rotate: 179.8, class: 'open_space' },
{ x: 954, y: 174.8, rotate: 179.8, class: 'open_space' },
{ x: 954, y: 194.3, rotate: 179.8, class: 'open_space' },
{ x: 982.7, y: 174.8, rotate: 179.8, class: 'open_space' },
{ x: 982.7, y: 194.3, rotate: 179.8, class: 'open_space' },
{ x: 1341.1, y: 62.4, rotate: 179.8, class: 'open_space' },
{ x: 1256.8, y: 89.3, rotate: 179.8, class: 'open_space' },
{ x: 1228.7, y: 89.3, rotate: 179.8, class: 'open_space' },
{ x: 1284.3, y: 89.3, rotate: 179.8, class: 'open_space' },
{ x: 1311.8, y: 89.3, rotate: 179.8, class: 'open_space' },
{ x: 1341.1, y: 89.3, rotate: 179.8, class: 'open_space' },
{ x: 996.7, y: 104.6, rotate: 179.8, class: 'open_space' },
{ x: 1024.2, y: 104.6, rotate: 179.8, class: 'open_space' },
{ x: 1051.6, y: 104.6, rotate: 179.8, class: 'open_space' },
{ x: 1109.7, y: 147.9, rotate: 179.8, class: 'open_space' },
{ x: 1082.2, y: 147.9, rotate: 179.8, class: 'open_space' },
{ x: 1054.1, y: 147.9, rotate: 179.8, class: 'open_space' },
{ x: 1109.7, y: 172.3, rotate: 179.8, class: 'open_space' },
{ x: 1082.2, y: 172.3, rotate: 179.8, class: 'open_space' },
{ x: 1054.1, y: 172.3, rotate: 179.8, class: 'open_space' },
{ x: 1109.7, y: 196.8, rotate: 179.8, class: 'open_space' },
{ x: 1082.2, y: 196.8, rotate: 179.8, class: 'open_space' },
{ x: 1054.1, y: 196.8, rotate: 179.8, class: 'open_space' },
{ x: 1175.6, y: 169.9, rotate: 122.7, class: 'open_space' },
{ x: 1163.4, y: 188.8, rotate: 122.7, class: 'open_space' },
{ x: 1151.8, y: 209, rotate: 122.7, class: 'open_space' },
{ x: 1142, y: 118.6, rotate: 179.8, class: 'open_space' },
{ x: 1170.7, y: 118.6, rotate: 179.8, class: 'open_space' },
{ x: 1200.6, y: 118.6, rotate: 179.8, class: 'open_space' },
{ x: 1256.8, y: 118.6, rotate: 179.8, class: 'open_space' },
{ x: 1227.5, y: 118.6, rotate: 179.8, class: 'open_space' },
{ x: 1200.6, y: 147.9, rotate: 179.8, class: 'open_space' },
{ x: 1227.5, y: 147.9, rotate: 179.8, class: 'open_space' },
{ x: 1256.8, y: 147.9, rotate: 179.8, class: 'open_space' },
{ x: 1284.3, y: 118.6, rotate: 179.8, class: 'open_space' },
{ x: 1311.8, y: 118.6, rotate: 179.8, class: 'open_space' },
{ x: 1341.1, y: 118.6, rotate: 179.8, class: 'open_space' },
{ x: 1284.3, y: 147.9, rotate: 179.8, class: 'open_space' },
{ x: 1313, y: 147.9, rotate: 179.8, class: 'open_space' },
{ x: 1341.1, y: 147.9, rotate: 179.8, class: 'open_space' },
{ x: 968, y: 726.2, rotate: -0.2, class: 'open_space' },
{ x: 949.7, y: 726.2, rotate: -0.2, class: 'open_space' },
{ x: 911.8, y: 602.8, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 584.5, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 566.2, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 657.8, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 639.4, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 621.1, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 712.7, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 694.4, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 676.1, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 767.7, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 749.4, rotate: 89.8, class: 'open_space' },
{ x: 911.8, y: 731, rotate: 89.8, class: 'open_space' },
{ x: -1.6, y: 502.7, rotate: 89.8, class: 'open_space' },
{ x: -1.6, y: 557.6, rotate: 89.8, class: 'open_space' },
{ x: -1.6, y: 539.3, rotate: 89.8, class: 'open_space' },
{ x: -1.6, y: 521, rotate: 89.8, class: 'open_space' },
{ x: -1.6, y: 612.6, rotate: 89.8, class: 'open_space' },
{ x: -1.6, y: 594.3, rotate: 89.8, class: 'open_space' },
{ x: -1.6, y: 575.9, rotate: 89.8, class: 'open_space' },
{ x: -1.6, y: 667.5, rotate: 89.8, class: 'open_space' },
{ x: -1.6, y: 649.2, rotate: 89.8, class: 'open_space' },
{ x: -1.6, y: 630.9, rotate: 89.8, class: 'open_space' },
{ x: 33.2, y: 501.5, rotate: 89.8, class: 'open_space' },
{ x: 33.2, y: 556.4, rotate: 89.8, class: 'open_space' },
{ x: 33.2, y: 538.1, rotate: 89.8, class: 'open_space' },
{ x: 33.2, y: 519.8, rotate: 89.8, class: 'open_space' },
{ x: 33.2, y: 611.4, rotate: 89.8, class: 'open_space' },
{ x: 33.2, y: 593, rotate: 89.8, class: 'open_space' },
{ x: 33.2, y: 574.7, rotate: 89.8, class: 'open_space' },
{ x: 33.2, y: 666.3, rotate: 89.8, class: 'open_space' },
{ x: 33.2, y: 648, rotate: 89.8, class: 'open_space' },
{ x: 33.2, y: 629.7, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 506.3, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 488, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 561.3, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 543, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 524.7, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 616.2, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 597.9, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 579.6, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 671.2, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 652.9, rotate: 89.8, class: 'open_space' },
{ x: 79.6, y: 634.6, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 501.5, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 483.1, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 556.4, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 538.1, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 519.8, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 611.4, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 593, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 574.7, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 666.3, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 648, rotate: 89.8, class: 'open_space' },
{ x: 47.8, y: 629.7, rotate: 89.8, class: 'open_space' },
{ x: 44.2, y: 27.6, rotate: -4.9, class: 'open_space' },
{ x: 25.9, y: 29.1, rotate: -4.9, class: 'open_space' },
{ x: 7.7, y: 30.6, rotate: -4.9, class: 'open_space' },
{ x: 80.7, y: 24.7, rotate: -4.9, class: 'open_space' },
{ x: 62.4, y: 26.1, rotate: -4.9, class: 'open_space' },
{ x: 47.8, y: 109.5, rotate: 76.6, class: 'open_space' },
{ x: 43.6, y: 91.6, rotate: 76.6, class: 'open_space' },
{ x: 39.5, y: 73.8, rotate: 76.6, class: 'open_space' },
{ x: 56.2, y: 145.1, rotate: 76.6, class: 'open_space' },
{ x: 52, y: 127.3, rotate: 76.6, class: 'open_space' },
{ x: 71.6, y: 209, rotate: 76.6, class: 'open_space' },
{ x: 67.5, y: 191.1, rotate: 76.6, class: 'open_space' },
{ x: 63.3, y: 173.3, rotate: 76.6, class: 'open_space' },
{ x: 80, y: 244.6, rotate: 76.6, class: 'open_space' },
{ x: 75.8, y: 226.8, rotate: 76.6, class: 'open_space' },
{ x: 22.1, y: 200.2, rotate: 88, class: 'open_space' },
{ x: 21.6, y: 181.9, rotate: 88, class: 'open_space' },
{ x: 23.8, y: 255.1, rotate: 88, class: 'open_space' },
{ x: 23.3, y: 236.8, rotate: 88, class: 'open_space' },
{ x: 22.7, y: 218.5, rotate: 88, class: 'open_space' },
{ x: 25.5, y: 310, rotate: 88, class: 'open_space' },
{ x: 24.9, y: 291.7, rotate: 88, class: 'open_space' },
{ x: 24.4, y: 273.4, rotate: 88, class: 'open_space' },


// Премиум места (cls-3)

{ x: 922.2, y: 462.4, rotate: 179.8, class: 'box_seat' },
{ x: 940.5, y: 462.4, rotate: 179.8, class: 'box_seat' },
{ x: 958.8, y: 462.4, rotate: 179.8, class: 'box_seat' },
{ x: 922.2, y: 477, rotate: 179.8, class: 'box_seat' },
{ x: 940.5, y: 477, rotate: 179.8, class: 'box_seat' },
{ x: 958.8, y: 477, rotate: 179.8, class: 'box_seat' },
{ x: 977.2, y: 462.4, rotate: 179.8, class: 'box_seat' },
{ x: 995.5, y: 462.4, rotate: 179.8, class: 'box_seat' },
{ x: 1013.8, y: 462.4, rotate: 179.8, class: 'box_seat' },
{ x: 977.2, y: 477, rotate: 179.8, class: 'box_seat' },
{ x: 995.5, y: 477, rotate: 179.8, class: 'box_seat' },
{ x: 1013.8, y: 477, rotate: 179.8, class: 'box_seat' },
{ x: 763.7, y: 502, rotate: 156.3, class: 'box_seat' },
{ x: 780.5, y: 494.7, rotate: 156.3, class: 'box_seat' },
{ x: 797.3, y: 487.4, rotate: 156.3, class: 'box_seat' },
{ x: 769.6, y: 515.5, rotate: 156.3, class: 'box_seat' },
{ x: 786.4, y: 508.1, rotate: 156.3, class: 'box_seat' },
{ x: 803.2, y: 500.8, rotate: 156.3, class: 'box_seat' },
{ x: 814.1, y: 480.1, rotate: 156.3, class: 'box_seat' },
{ x: 830.9, y: 472.8, rotate: 156.3, class: 'box_seat' },
{ x: 847.7, y: 465.5, rotate: 156.3, class: 'box_seat' },
{ x: 820, y: 493.5, rotate: 156.3, class: 'box_seat' },
{ x: 836.8, y: 486.2, rotate: 156.3, class: 'box_seat' },
{ x: 853.5, y: 478.9, rotate: 156.3, class: 'box_seat' },
{ x: 603.1, y: 592.1, rotate: 134.8, class: 'box_seat' },
{ x: 616.1, y: 579.2, rotate: 134.8, class: 'box_seat' },
{ x: 629.1, y: 566.2, rotate: 134.8, class: 'box_seat' },
{ x: 613.5, y: 602.5, rotate: 134.8, class: 'box_seat' },
{ x: 626.5, y: 589.6, rotate: 134.8, class: 'box_seat' },
{ x: 639.4, y: 576.6, rotate: 134.8, class: 'box_seat' },
{ x: 642, y: 553.3, rotate: 134.8, class: 'box_seat' },
{ x: 655, y: 540.4, rotate: 134.8, class: 'box_seat' },
{ x: 667.9, y: 527.4, rotate: 134.8, class: 'box_seat' },
{ x: 652.4, y: 563.7, rotate: 134.8, class: 'box_seat' },
{ x: 665.3, y: 550.7, rotate: 134.8, class: 'box_seat' },
{ x: 678.3, y: 537.8, rotate: 134.8, class: 'box_seat' },
{ x: 690.1, y: 485.5, rotate: 67.1, class: 'box_seat' },
{ x: 683, y: 468.6, rotate: 67.1, class: 'box_seat' },
{ x: 676, y: 451.7, rotate: 67.1, class: 'box_seat' },
{ x: 703.6, y: 479.8, rotate: 67.1, class: 'box_seat' },
{ x: 696.6, y: 462.9, rotate: 67.1, class: 'box_seat' },
{ x: 689.5, y: 446, rotate: 67.1, class: 'box_seat' },
{ x: 668.9, y: 434.8, rotate: 67.1, class: 'box_seat' },
{ x: 661.8, y: 417.9, rotate: 67.1, class: 'box_seat' },
{ x: 654.7, y: 401, rotate: 67.1, class: 'box_seat' },
{ x: 682.4, y: 429.1, rotate: 67.1, class: 'box_seat' },
{ x: 675.3, y: 412.2, rotate: 67.1, class: 'box_seat' },
{ x: 668.2, y: 395.3, rotate: 67.1, class: 'box_seat' },
{ x: 796.4, y: 440.3, rotate: 67.1, class: 'box_seat' },
{ x: 789.3, y: 423.4, rotate: 67.1, class: 'box_seat' },
{ x: 782.2, y: 406.5, rotate: 67.1, class: 'box_seat' },
{ x: 809.9, y: 434.6, rotate: 67.1, class: 'box_seat' },
{ x: 802.8, y: 417.7, rotate: 67.1, class: 'box_seat' },
{ x: 795.7, y: 400.8, rotate: 67.1, class: 'box_seat' },
{ x: 775.1, y: 389.6, rotate: 67.1, class: 'box_seat' },
{ x: 768.1, y: 372.7, rotate: 67.1, class: 'box_seat' },
{ x: 761, y: 355.8, rotate: 67.1, class: 'box_seat' },
{ x: 788.6, y: 383.9, rotate: 67.1, class: 'box_seat' },
{ x: 781.6, y: 367, rotate: 67.1, class: 'box_seat' },
{ x: 774.5, y: 350.1, rotate: 67.1, class: 'box_seat' },
{ x: 742.6, y: 462.9, rotate: 67.1, class: 'box_seat' },
{ x: 735.6, y: 446, rotate: 67.1, class: 'box_seat' },
{ x: 728.5, y: 429.1, rotate: 67.1, class: 'box_seat' },
{ x: 756.2, y: 457.2, rotate: 67.1, class: 'box_seat' },
{ x: 749.1, y: 440.3, rotate: 67.1, class: 'box_seat' },
{ x: 742, y: 423.4, rotate: 67.1, class: 'box_seat' },
{ x: 721.4, y: 412.2, rotate: 67.1, class: 'box_seat' },
{ x: 714.3, y: 395.3, rotate: 67.1, class: 'box_seat' },
{ x: 707.2, y: 378.4, rotate: 67.1, class: 'box_seat' },
{ x: 734.9, y: 406.5, rotate: 67.1, class: 'box_seat' },
{ x: 727.8, y: 389.6, rotate: 67.1, class: 'box_seat' },
{ x: 720.8, y: 372.7, rotate: 67.1, class: 'box_seat' },

{ x: 725.6, y: 112.3, rotate: 158.8, class: 'box_seat' },
{ x: 742.7, y: 105.7, rotate: 158.8, class: 'box_seat' },
{ x: 759.8, y: 99.1, rotate: 158.8, class: 'box_seat' },
{ x: 776.9, y: 92.6, rotate: 158.8, class: 'box_seat' },
{ x: 794, y: 86, rotate: 158.8, class: 'box_seat' },
{ x: 811.1, y: 79.4, rotate: 158.8, class: 'box_seat' },
{ x: 731, y: 126, rotate: 158.8, class: 'box_seat' },
{ x: 748.1, y: 119.5, rotate: 158.8, class: 'box_seat' },
{ x: 765.2, y: 112.9, rotate: 158.8, class: 'box_seat' },
{ x: 782.3, y: 106.3, rotate: 158.8, class: 'box_seat' },
{ x: 799.4, y: 99.8, rotate: 158.8, class: 'box_seat' },
{ x: 816.5, y: 93.2, rotate: 158.8, class: 'box_seat' },
{ x: 595, y: 162.3, rotate: 158.8, class: 'box_seat' },
{ x: 612.1, y: 155.8, rotate: 158.8, class: 'box_seat' },
{ x: 629.2, y: 149.2, rotate: 158.8, class: 'box_seat' },
{ x: 646.3, y: 142.6, rotate: 158.8, class: 'box_seat' },
{ x: 663.4, y: 136.1, rotate: 158.8, class: 'box_seat' },
{ x: 680.5, y: 129.5, rotate: 158.8, class: 'box_seat' },
{ x: 600.4, y: 176.1, rotate: 158.8, class: 'box_seat' },
{ x: 617.5, y: 169.5, rotate: 158.8, class: 'box_seat' },
{ x: 634.6, y: 163, rotate: 158.8, class: 'box_seat' },
{ x: 651.7, y: 156.4, rotate: 158.8, class: 'box_seat' },
{ x: 668.8, y: 149.8, rotate: 158.8, class: 'box_seat' },
{ x: 685.9, y: 143.3, rotate: 158.8, class: 'box_seat' },
{ x: 464.3, y: 212.4, rotate: 158.8, class: 'box_seat' },
{ x: 481.4, y: 205.8, rotate: 158.8, class: 'box_seat' },
{ x: 498.5, y: 199.3, rotate: 158.8, class: 'box_seat' },
{ x: 515.6, y: 192.7, rotate: 158.8, class: 'box_seat' },
{ x: 532.7, y: 186.1, rotate: 158.8, class: 'box_seat' },
{ x: 549.8, y: 179.6, rotate: 158.8, class: 'box_seat' },
{ x: 469.7, y: 226.2, rotate: 158.8, class: 'box_seat' },
{ x: 486.8, y: 219.6, rotate: 158.8, class: 'box_seat' },
{ x: 503.9, y: 213, rotate: 158.8, class: 'box_seat' },
{ x: 521, y: 206.5, rotate: 158.8, class: 'box_seat' },
{ x: 538.1, y: 199.9, rotate: 158.8, class: 'box_seat' },
{ x: 555.2, y: 193.3, rotate: 158.8, class: 'box_seat' }


        ];

        // Инициализация карты
        const map = document.getElementById('map');
        let selectedPlaces = new Set();

        // Функция для автоматического форматирования VK ссылки
        function formatVKLink(input) {
            let value = input.value.trim();
            
            // Если введен только username (без vk.com/)
            if (value.length > 0 && !value.includes('vk.com/')) {
                value = 'vk.com/' + value.replace(/^@/, '');
            }
            
            // Удаляем все лишние символы
            value = value.replace(/[^a-zA-Z0-9_\.\-\/]/g, '');
            
            input.value = value;
        }

        // Инициализация элементов мест
        places.forEach((place, index) => {
            const placeEl = document.createElement('div');
            placeEl.className = `place ${place.class}`;
            placeEl.style.left = `${place.x}px`;
            placeEl.style.top = `${place.y}px`;
            placeEl.style.transform = `rotate(${place.rotate}deg)`;
            placeEl.dataset.id = index;
            placeEl.title = `Место #${index+1} | Тип: ${place.class.replace('_', ' ')}`;

            placeEl.addEventListener('click', function() {
                const placeId = this.dataset.id;
                
                if (this.classList.contains('booked')) {
                    alert('Это место уже забронировано!');
                    return;
                }
                
                if (selectedPlaces.has(placeId)) {
                    selectedPlaces.delete(placeId);
                    this.classList.remove('selected');
                } else {
                    selectedPlaces.add(placeId);
                    this.classList.add('selected');
                }
                
                updateSelectedPlacesUI();
            });

            map.appendChild(placeEl);
        });

        // Обновление UI выбранных мест
        function updateSelectedPlacesUI() {
            const countElement = document.getElementById('selectedPlacesCount');
            const listElement = document.getElementById('selectedPlacesList');
            
            if (countElement) countElement.textContent = selectedPlaces.size;
            if (listElement) {
                listElement.innerHTML = '';
                selectedPlaces.forEach(placeId => {
                    const placeInfo = document.createElement('div');
                    placeInfo.textContent = `Место #${parseInt(placeId)+1}`;
                    listElement.appendChild(placeInfo);
                });
            }
        }

        // Обработка формы
        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Валидация VK ссылки
            const vkLinkInput = this.elements.link;
            const vkLink = vkLinkInput.value.trim();
            const vkRegex = /^(https?:\/\/)?(www\.)?vk\.com\/([a-zA-Z0-9_\.-]+)/;
            
            if (!vkRegex.test(vkLink)) {
                alert('Пожалуйста, введите корректную ссылку на страницу VK!\nПример: vk.com/username или https://vk.com/id12345');
                vkLinkInput.focus();
                return;
            }
            
            if (selectedPlaces.size === 0) {
                alert('Пожалуйста, выберите хотя бы одно место!');
                return;
            }
            
            const formData = {
                name: this.elements.name.value.trim(),
                link: vkLink,
                date: document.querySelector('input[name="date"]:checked').value,
                places: Array.from(selectedPlaces).map(id => parseInt(id)+1),
                placesIds: Array.from(selectedPlaces)
            };
            
            // Отправка данных (функция должна быть в app.js)
            if (typeof sendToVK === 'function') {
                sendToVK(formData);
            }
            
            // Помечаем места как забронированные
            selectedPlaces.forEach(placeId => {
                const placeEl = document.querySelector(`.place[data-id="${placeId}"]`);
                if (placeEl) {
                    placeEl.classList.remove('selected');
                    placeEl.classList.add('booked');
                }
            });
            
            selectedPlaces.clear();
            updateSelectedPlacesUI();
            this.reset();
            
            alert(`Успешно забронировано ${formData.places.length} мест!`);
        });

        // Масштабирование карты
        function scaleMap() {
            const mapSection = document.querySelector('.map-section');
            if (mapSection) {
                const scale = Math.min(
                    mapSection.clientWidth / 1300, //1364.7
                    mapSection.clientHeight / 800  //784.4
                );
                const mapElement = document.getElementById('map');
                if (mapElement) {
                    mapElement.style.transform = `scale(${scale})`;
                }
            }
        }

        // Обработчик для форматирования VK ссылки при вводе
        document.querySelector('input[name="link"]').addEventListener('blur', function() {
            formatVKLink(this);
        });

        // Инициализация при загрузке
        window.addEventListener('load', function() {
            scaleMap();
            updateSelectedPlacesUI();
        });
        
        window.addEventListener('resize', scaleMap);
    </script>
    <script src="app.js"></script>
</body>
</html>